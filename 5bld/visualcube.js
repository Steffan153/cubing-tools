!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["sr-visualizer"]=e():t["sr-visualizer"]=e()}(window,function(){return function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0});var a,s,o=n(1);(s=a=e.Face||(e.Face={}))[s.U=0]="U",s[s.R=1]="R",s[s.F=2]="F",s[s.D=3]="D",s[s.L=4]="L",s[s.B=5]="B",e.AllFaces=[a.U,a.R,a.F,a.D,a.L,a.B];var c,u,h,f,l=function(){function t(){}return t.U=[0,-1,0],t.R=[1,0,0],t.F=[0,0,-1],t.D=[0,1,0],t.L=[-1,0,0],t.B=[0,0,1],t}();e.FaceRotationVectors=l,e.DefaultColorScheme=((i={})[a.U]=o.ColorCode.Yellow,i[a.R]=o.ColorCode.Red,i[a.F]=o.ColorCode.Blue,i[a.D]=o.ColorCode.White,i[a.L]=o.ColorCode.Orange,i[a.B]=o.ColorCode.Green,i),e.JapaneseColorScheme=((r={})[a.U]=o.ColorCode.Blue,r[a.R]=o.ColorCode.Orange,r[a.F]=o.ColorCode.Green,r[a.D]=o.ColorCode.White,r[a.L]=o.ColorCode.Red,r[a.B]=o.ColorCode.Yellow,r),(f=c=e.AlgorithmUnit||(e.AlgorithmUnit={})).F="F",f.U="U",f.R="R",f.L="L",f.D="D",f.B="B",f.M="M",f.E="E",f.S="S",f.X="x",f.Y="y",f.Z="z",e.AxisSymbolToAxis={x:0,y:1,z:2},e.possibleMoves=[c.F,c.U,c.R,c.L,c.D,c.B,c.M,c.E,c.S,c.X,c.Y,c.Z],(h=e.TurnAbbreviation||(e.TurnAbbreviation={})).Clockwise="",h.CounterClockwise="'",h.Double="2",(u=e.Masking||(e.Masking={})).FL="fl",u.F2L="f2l",u.LL="ll",u.CLL="cll",u.ELL="ell",u.OLL="oll",u.PLL="pll",u.OCLL="ocll",u.OELL="oell",u.COLL="coll",u.OCELL="ocell",u.WV="wv",u.VH="vh",u.ELS="els",u.CLS="cls",u.CMLL="cmll",u.CROSS="cross",u.F2L3="f2l_3",u.F2L2="f2l_2",u.F2LSM="f2l_sm",u.F2L1="f2l_1",u.F2B="f2b",u.LINE="line",u.blank="blank",u.centers="centers",u.beginnerstep6="beginnerstep6",u.beginnerstep3="beginnerstep3",u.beginnerstep2="beginnerstep2",u.beginnerstep1="beginnerstep1",u.f1c="f1c",u.f2c="f2c",u.f3c="f3c",u.yau1e="yau1e",u.yau5e="yau5e",u.yau3e="yau3e",u.yau4e="yau4e",u.yaul4c="yaul4c",u.yau3e1c="yau3e1c",u.yau3e2c="yau3e2c",u.EDGES="edgesonly",u.bld1edge="bld1edge",u.bld1corner="bld1corner"},function(t,e,n){"use strict";var i,r,a,s,o,c,u,h,f,l,d,p;Object.defineProperty(e,"__esModule",{value:!0}),(p=o=e.ColorCode||(e.ColorCode={})).Black="#000000",p.DarkGray="#404040",p.Gray="#808080",p.Silver="#BFBFBF",p.White="#FFFFFF",p.Yellow="#FEFE00",p.Red="#EE0000",p.Orange="#FFA100",p.Blue="#0000F2",p.Green="#00D800",p.Purple="#A83DD9",p.Pink="#F33D7B",p.Transparent="transparent",(d=c=e.ColorName||(e.ColorName={})).Black="black",d.DarkGray="darkGray",d.Gray="gray",d.Silver="silver",d.White="white",d.Yellow="yellow",d.Red="red",d.Orange="orange",d.Blue="blue",d.Green="green",d.Purple="purple",d.Pink="pink",d.Transparent="transparent",(l=u=e.ColorAbbreviation||(e.ColorAbbreviation={})).Black="n",l.DarkGray="d",l.Gray="l",l.Silver="s",l.White="w",l.Yellow="y",l.Red="r",l.Orange="o",l.Blue="b",l.Green="g",l.Purple="m",l.Pink="p",l.Transparent="t",(f=h=e.FaceletDefinition||(e.FaceletDefinition={})).Up="u",f.Down="d",f.Left="l",f.Right="r",f.Back="b",f.Front="f",f.Transparent="t",f.Oriented="o",f.Blank="n",e.ColorNameToCode=((i={})[c.Black]=o.Black,i[c.DarkGray]=o.DarkGray,i[c.Gray]=o.Gray,i[c.Silver]=o.Silver,i[c.White]=o.White,i[c.Yellow]=o.Yellow,i[c.Red]=o.Red,i[c.Orange]=o.Orange,i[c.Blue]=o.Blue,i[c.Green]=o.Green,i[c.Purple]=o.Purple,i[c.Pink]=o.Pink,i),e.ColorAbbreviationToCode=((r={})[u.Black]=o.Black,r[u.DarkGray]=o.DarkGray,r[u.Gray]=o.Gray,r[u.Silver]=o.Silver,r[u.White]=o.White,r[u.Yellow]=o.Yellow,r[u.Red]=o.Red,r[u.Orange]=o.Orange,r[u.Blue]=o.Blue,r[u.Green]=o.Green,r[u.Purple]=o.Purple,r[u.Pink]=o.Pink,r[u.Transparent]=o.Transparent,r),e.FaceletAbbreviateToDefinition={u:h.Up,f:h.Front,r:h.Right,d:h.Down,l:h.Left,b:h.Back,t:h.Transparent,o:h.Oriented,n:h.Blank},e.FaceletToFace=((a={})[h.Up]=0,a[h.Down]=3,a[h.Left]=4,a[h.Right]=1,a[h.Front]=2,a[h.Back]=5,a),e.FaceletToColor=((s={})[h.Oriented]=c.Gray,s[h.Blank]=o.DarkGray,s[h.Transparent]=c.Transparent,s)},function(t,e,n){"use strict";var r,i;function a(t,n){return t.map(function(t,e){return t+n[e]})}function s(t,e){return t.map(function(t){return t*e})}Object.defineProperty(e,"__esModule",{value:!0}),(i=r=e.Axis||(e.Axis={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z",e.makeMatrix=function(t,e){for(var n=[],i=0;i<t;i++){n[i]=[];for(var r=0;r<e;r++)n[i][r]=null}return n},e.translate=a,e.scale=s,e.transScale=function(t,e,n){return a(s(a(t,e.map(function(t){return-t})),n),e)},e.rotate=function(t,e,n){var i=t.slice();switch(e){case r.X:i[2]=t[2]*Math.cos(n)-t[1]*Math.sin(n),i[1]=t[2]*Math.sin(n)+t[1]*Math.cos(n);break;case r.Y:i[0]=t[0]*Math.cos(n)+t[2]*Math.sin(n),i[2]=-t[0]*Math.sin(n)+t[2]*Math.cos(n);break;case r.Z:i[0]=t[0]*Math.cos(n)-t[1]*Math.sin(n),i[1]=t[0]*Math.sin(n)+t[1]*Math.cos(n)}return i},e.project=function(t,e){return[t[0]*e/t[2],t[1]*e/t[2],t[2]]},e.radians2Degrees=function(t){return 180*t/Math.PI}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.parseColor=function(t){return/^[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/.exec(t)?"#"+t:i.ColorAbbreviationToCode[t]?i.ColorAbbreviationToCode[t]:i.ColorNameToCode[t]?i.ColorNameToCode[t]:i.ColorCode.Gray}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(2);function c(t,e,n,i){switch(t){case r.Face.U:return[n,0,e-i];case r.Face.R:return[e,i,n];case r.Face.F:return[n,i,0];case r.Face.D:return[n,e,i];case r.Face.L:return[0,i,e-n];case r.Face.B:return[e-n,i,e];default:throw new Error("Unknown cube face: '"+t+"'")}}function i(i,r){for(var a=o.makeMatrix(r.cubeSize+1,r.cubeSize+1),s=0;s<=r.cubeSize;s++)for(var t=function(t){var e=c(i,r.cubeSize,s,t),n=[-r.cubeSize/2,-r.cubeSize/2,-r.cubeSize/2];e=o.translate(e,n),e=o.scale(e,1/r.cubeSize),r.viewportRotations.forEach(function(t){e=o.rotate(e,t[0],Math.PI*t[1]/180)}),e=o.translate(e,[0,0,r.dist]),e=o.project(e,r.dist),a[s][t]=e},e=0;e<=r.cubeSize;e++)t(e);return a}e.rotateFaces=function(i,t){return r.AllFaces.reduce(function(e,n){return t.forEach(function(t){e[n]||(e[n]=i[n].slice()),e[n]=o.rotate(e[n],t[0],Math.PI*t[1]/180)}),e},{})},e.makeStickerPosition=c,e.makeFaceStickers=i,e.makeCubeGeometry=function(n){return"plan"===n.view&&(n.viewportRotations=[[o.Axis.X,-90]]),r.AllFaces.reduce(function(t,e){return t[e]=i(e,n),t},{})}},function(t,e,n){"use strict";var i,r,a,s,o,c;Object.defineProperty(e,"__esModule",{value:!0});var u,h,f=n(2),l=n(0);(h=u=e.TurnType||(e.TurnType={}))[h.Clockwise=0]="Clockwise",h[h.CounterClockwise=1]="CounterClockwise",h[h.Double=2]="Double";var d=function(t,e){return t},p=function(t,e){return t*e%(e*e+1)},F=function(t,e){return e*e+1-p(t,e)},m=function(t,e){return e*e-t+1},v=((i={})[u.Clockwise]=u.CounterClockwise,i[u.CounterClockwise]=u.Clockwise,i[u.Double]=u.Double,i),y=((r={})[f.Axis.X]=[l.Face.U,l.Face.B,l.Face.F,l.Face.D],r[f.Axis.Y]=[l.Face.L,l.Face.B,l.Face.R,l.Face.F],r[f.Axis.Z]=[l.Face.L,l.Face.U,l.Face.R,l.Face.D],(a={})[f.Axis.X]=((s={})[l.Face.U]=d,s[l.Face.B]=m,s[l.Face.F]=d,s[l.Face.D]=d,s[l.Face.L]=null,s[l.Face.R]=null,s),a[f.Axis.Y]=((o={})[l.Face.U]=null,o[l.Face.B]=p,o[l.Face.F]=p,o[l.Face.D]=null,o[l.Face.L]=p,o[l.Face.R]=p,o),a[f.Axis.Z]=((c={})[l.Face.U]=p,c[l.Face.B]=null,c[l.Face.F]=null,c[l.Face.D]=F,c[l.Face.L]=d,c[l.Face.R]=m,c),a),g=function(){function t(t,e){this.cubeSize=t,this.faces={},this.numStickers=this.cubeSize*this.cubeSize,this.clockwiseMapping=[],this.counterClockwiseMapping=[],this.doubleMapping=[],this.faces=e,this.faces||this.initValues();for(var n=1;n<=this.numStickers;n++)this.clockwiseMapping.push(F(n,t)),this.counterClockwiseMapping.push(p(n,t)),this.doubleMapping.push(m(n,t))}return t.prototype.initValues=function(){var n=this,i=1;l.AllFaces.forEach(function(t){n.faces[t]=[];for(var e=0;e<n.numStickers;e++)n.faces[t].push(i++)})},t.prototype.rotateFace=function(e,t){var n=this;switch(t){case u.Clockwise:this.faces[e]=this.clockwiseMapping.map(function(t){return n.faces[e][t-1]});break;case u.CounterClockwise:this.faces[e]=this.counterClockwiseMapping.map(function(t){return n.faces[e][t-1]});break;case u.Double:this.faces[e].reverse()}},t.prototype.axisRotation=function(t,e,n,i,r,a){var s=this;void 0===r&&(r=!0),void 0===a&&(a=!1),r||i.reverse();for(var o=i.map(function(t){return s.faces[t].slice()}),c=0;c<this.cubeSize;c++)for(var u=0;u<e;u++)for(var h=this.cubeSize*c+(t+u),f=0;f<i.length;f++){var l=i[f],d=a?i[(f+2)%i.length]:i[(f+1)%i.length],p=y[n][l](h+1,this.cubeSize)-1,F=y[n][d](h+1,this.cubeSize)-1;this.faces[l][p]=o[(a?f+2:f+1)%o.length][F]}},t.prototype.xLayersRotation=function(t,e,n,i){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===i&&(i=1);var r=[l.Face.U,l.Face.F,l.Face.D,l.Face.B];this.axisRotation(t,i,f.Axis.X,r,e,n)},t.prototype.yLayersRotation=function(t,e,n,i){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===i&&(i=1);var r=[l.Face.L,l.Face.F,l.Face.R,l.Face.B];this.axisRotation(t,i,f.Axis.Y,r,e,n)},t.prototype.zLayersRotation=function(t,e,n,i){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===i&&(i=1);var r=[l.Face.U,l.Face.L,l.Face.D,l.Face.R];this.axisRotation(t,i,f.Axis.Z,r,e,n)},t.prototype.safeSlices=function(t){return t>this.cubeSize?this.cubeSize:t},t.prototype.rTurn=function(t,e){void 0===e&&(e=1),this.rotateFace(l.Face.R,t);var n=this.cubeSize-e;this.xLayersRotation(n,t===u.Clockwise,t===u.Double,e)},t.prototype.lTurn=function(t,e){void 0===e&&(e=1),this.rotateFace(l.Face.L,t),this.xLayersRotation(0,t===u.CounterClockwise,t===u.Double,e)},t.prototype.uTurn=function(t,e){void 0===e&&(e=1),this.rotateFace(l.Face.U,t),this.yLayersRotation(0,t===u.Clockwise,t===u.Double,e)},t.prototype.dTurn=function(t,e){void 0===e&&(e=1),this.rotateFace(l.Face.D,t);var n=this.cubeSize-e;this.yLayersRotation(n,t===u.CounterClockwise,t===u.Double,e)},t.prototype.fTurn=function(t,e){void 0===e&&(e=1),this.rotateFace(l.Face.F,t);var n=this.cubeSize-e;this.zLayersRotation(n,t===u.Clockwise,t===u.Double,e)},t.prototype.bTurn=function(t,e){void 0===e&&(e=1),this.rotateFace(l.Face.B,t),this.zLayersRotation(0,t===u.CounterClockwise,t===u.Double,e)},t.prototype.mTurn=function(t){this.cubeSize<2||this.xLayersRotation(1,t===u.CounterClockwise,t===u.Double,this.cubeSize-2)},t.prototype.eTurn=function(t){this.cubeSize<2||this.yLayersRotation(1,t===u.CounterClockwise,t===u.Double,this.cubeSize-2)},t.prototype.sTurn=function(t){this.cubeSize<2||this.zLayersRotation(1,t===u.Clockwise,t===u.Double,this.cubeSize-2)},t.prototype.xTurn=function(t){this.rotateFace(l.Face.R,t),this.rotateFace(l.Face.L,v[t]),this.xLayersRotation(0,t===u.Clockwise,t===u.Double,this.cubeSize)},t.prototype.yTurn=function(t){this.rotateFace(l.Face.U,t),this.rotateFace(l.Face.D,v[t]),this.yLayersRotation(0,t===u.Clockwise,t===u.Double,this.cubeSize)},t.prototype.zTurn=function(t){this.rotateFace(l.Face.F,t),this.rotateFace(l.Face.B,v[t]),this.zLayersRotation(0,t===u.Clockwise,t===u.Double,this.cubeSize)},t.prototype.turn=function(t){var e=this.safeSlices(t.slices);switch(t.move){case l.AlgorithmUnit.F:this.fTurn(t.turnType,e);break;case l.AlgorithmUnit.B:this.bTurn(t.turnType,e);break;case l.AlgorithmUnit.U:this.uTurn(t.turnType,e);break;case l.AlgorithmUnit.D:this.dTurn(t.turnType,e);break;case l.AlgorithmUnit.R:this.rTurn(t.turnType,e);break;case l.AlgorithmUnit.L:this.lTurn(t.turnType,e);break;case l.AlgorithmUnit.M:this.mTurn(t.turnType);break;case l.AlgorithmUnit.E:this.eTurn(t.turnType);break;case l.AlgorithmUnit.S:this.sTurn(t.turnType);break;case l.AlgorithmUnit.X:this.xTurn(t.turnType);break;case l.AlgorithmUnit.Y:this.yTurn(t.turnType);break;case l.AlgorithmUnit.Z:this.zTurn(t.turnType);break;default:throw new Error("Unrecognized move in turn "+JSON.stringify(t))}},t}();e.CubeData=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.parseFaceletDefinitions=function(t){for(var e=[],n=0;n<t.length;n++)e.push(i.FaceletAbbreviateToDefinition[t.charAt(n)]);return e}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),a=n(2),s=n(8),o=n(0),c=n(11),u=n(1),h=n(14),f=n(6),l={cubeSize:3,width:128,height:128,viewportRotations:[[a.Axis.Y,35],[a.Axis.X,-30]],colorScheme:o.DefaultColorScheme,cubeColor:u.ColorName.Black,cubeOpacity:100,stickerOpacity:100,dist:5,outlineWidth:.94,strokeWidth:0,viewbox:{x:-.9,y:-.9,width:1.8,height:1.8}};function d(t,e){void 0===e&&(e={});var n=p(l,e),i=r.makeCubeGeometry(n);n.stickerColors=c.makeStickerColors(n),s.renderCube(t,i,n)}function p(t,e){var n;return"string"==typeof(n="string"==typeof e?h.parseOptions(e):e).facelets&&(n.facelets=f.parseFaceletDefinitions(n.facelets)),i({},t,n)}e.cubeSVG=d,e.cube=function(t){void 0===t&&(t={});return c.makeStickerColors(p(l,t))},e.cubePNG=function(t){void 0===t&&(t={});var e=document.createElement("div"),n=p(l,t);d(e,n);var i=null,r=e.querySelector("svg");i=document.createElement("img");var a=document.createElement("canvas"),s=a.getContext("2d"),o=new Image;o.width=a.width=i.width=n.width||128,o.height=a.height=i.height=n.height||128,o.onload=function(){s.drawImage(o,0,0,o.width,o.height),i.src=a.toDataURL()};var c=(new XMLSerializer).serializeToString(r);return o.src="data:image/svg+xml,"+encodeURIComponent(c),i}},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0});var p=n(1),x=n(9),w=n(4),y=n(2),k=n(0),C=n(10),S=((i={})[k.Face.U]=[0,-1,0],i[k.Face.R]=[1,0,0],i[k.Face.F]=[0,0,-1],i[k.Face.D]=[0,1,1],i[k.Face.L]=[-1,0,0],i[k.Face.B]=[0,0,1],i);function M(t,e){return e[t][2]<-.105}function L(t,e){var n=t.group();return n.opacity(e.cubeOpacity/100),n.attr({"stroke-width":"0.1","stroke-linejoin":"round"}),n}function A(t,e,n){var i=e.length-1,r=n.outlineWidth,a=[[e[0][0][0]*r,e[0][0][1]*r],[e[i][0][0]*r,e[i][0][1]*r],[e[i][i][0]*r,e[i][i][1]*r],[e[0][i][0]*r,e[0][i][1]*r]],s=t.polygon(a);return s.fill(n.cubeColor),s.stroke(n.cubeColor),s}function R(t,e,n,i){var r=n.length-1,a=t.group();a.opacity(i.stickerOpacity/100),a.attr({"stoke-opacity":"0.5","stroke-width":i.strokeWidth,"stroke-linejoin":"round"});for(var s=0;s<r;s++)for(var o=0;o<r;o++){var c=[(n[o][s][0]+n[o+1][s+1][0])/2,(n[o][s][1]+n[o+1][s+1][1])/2,0],u=y.transScale(n[o][s],c,.85),h=y.transScale(n[o+1][s],c,.85),f=y.transScale(n[o+1][s+1],c,.85),l=y.transScale(n[o][s+1],c,.85),d=m(e,s,o,i);d!==p.ColorName.Transparent&&F(a,u,h,f,l,d,i.cubeColor)}return a}function F(t,e,n,i,r,a,s){var o=[[e[0],e[1]],[n[0],n[1]],[i[0],i[1]],[r[0],r[1]]],c=t.polygon(o);return c.fill(a),c.stroke(s),c}function m(t,e,n,i){var r=k.AllFaces.indexOf(t),a=e*i.cubeSize+n,s=r*(i.cubeSize*i.cubeSize)+a;if(!Array.isArray(i.facelets)&&Array.isArray(i.stickerColors))return i.stickerColors.length<=s?p.ColorName.Black:i.stickerColors[s];if(Array.isArray(i.facelets)){if(i.facelets.length<=s)return p.ColorCode.DarkGray;var o=i.facelets[s];if(null==p.FaceletToFace[o])return p.FaceletToColor[o]||p.ColorCode.DarkGray;var c=p.FaceletToFace[o];return i.colorScheme[c]}return i.colorScheme[t]||p.ColorName.Black}function D(t,e,n,i,r){for(var a=y.scale(i[e],0),s=y.scale(i[e],.2),o=0;o<r.cubeSize;o++){var c=[(n[o][0][0]+n[o+1][1][0])/2,(n[o][0][1]+n[o+1][1][1])/2,0],u=y.translate(y.transScale(n[o][0],c,.94),a),h=y.translate(y.transScale(n[o+1][0],c,.94),a),f=y.translate(y.transScale(n[o+1][1],c,.94),s),l=y.translate(y.transScale(n[o][1],c,.94),s),d=m(e,0,o,r);d!==p.ColorName.Transparent&&F(t,u,h,f,l,d,r.cubeColor)}}function U(t,e,n){var i=e[0].length-1;if(n.move)if(n.scale||(n.scale=10),n.influence||(n.influence=-1<["U","U'","R","R'","F","F'","x","x'","x2","y","y'","y2","z","z'","z2","M","M'","M2","E","E'","E2","S","S'","S2"].indexOf(n.move.replace("w",""))?3:10),n.color||(n.color="silver"),3==i)switch(n.move){case"x":case"M'":n.s1={face:k.Face.F,n:4},n.s2={face:k.Face.U,n:4},n.s3={face:k.Face.L,n:2};break;case"x'":case"M":n.s1={face:k.Face.U,n:4},n.s2={face:k.Face.F,n:4},n.s3={face:k.Face.L,n:2};break;case"x2":case"M2":n.s1={face:k.Face.F,n:7},n.s2={face:k.Face.U,n:1},n.s3={face:k.Face.L,n:2},n.influence=5;break;case"y":case"E'":n.s1={face:k.Face.R,n:4},n.s2={face:k.Face.F,n:4},n.s3={face:k.Face.D,n:2};break;case"y'":case"E":n.s1={face:k.Face.F,n:4},n.s2={face:k.Face.R,n:4},n.s3={face:k.Face.D,n:2};break;case"y2":case"E2":n.s1={face:k.Face.R,n:5},n.s2={face:k.Face.F,n:3},n.s3={face:k.Face.D,n:2},n.influence=5;break;case"z":case"S":n.s1={face:k.Face.U,n:4},n.s2={face:k.Face.R,n:4},n.s3={face:k.Face.B,n:0},n.influence=5;break;case"z'":case"S'":n.s1={face:k.Face.R,n:4},n.s2={face:k.Face.U,n:4},n.s3={face:k.Face.B,n:0},n.influence=5;break;case"z2":case"S2":n.s1={face:k.Face.U,n:3},n.s2={face:k.Face.R,n:7},n.s3={face:k.Face.B,n:0},n.influence=7;break;case"U":n.s1={face:k.Face.R,n:0},n.s2={face:k.Face.F,n:0},n.s3={face:k.Face.R,n:4},n.influence=5;break;case"U'":n.s1={face:k.Face.F,n:0},n.s2={face:k.Face.R,n:0},n.s3={face:k.Face.F,n:4};break;case"U2":n.s1={face:k.Face.R,n:2},n.s2={face:k.Face.F,n:0},n.s3={face:k.Face.F,n:2};break;case"R":n.s1={face:k.Face.F,n:8},n.s2={face:k.Face.U,n:8},n.s3={face:k.Face.F,n:4};break;case"R'":n.s1={face:k.Face.U,n:8},n.s2={face:k.Face.F,n:8},n.s3={face:k.Face.F,n:4};break;case"R2":n.s1={face:k.Face.F,n:8},n.s2={face:k.Face.U,n:2},n.s3={face:k.Face.U,n:8};break;case"F":n.s1={face:k.Face.U,n:6},n.s2={face:k.Face.R,n:0},n.s3={face:k.Face.U,n:4};break;case"F'":n.s1={face:k.Face.R,n:0},n.s2={face:k.Face.U,n:6},n.s3={face:k.Face.U,n:4};break;case"F2":n.s1={face:k.Face.U,n:6},n.s2={face:k.Face.R,n:6},n.s3={face:k.Face.R,n:0};break;case"D":n.s1={face:k.Face.F,n:6},n.s2={face:k.Face.R,n:7},n.s3={face:k.Face.F,n:8};break;case"D'":n.s1={face:k.Face.R,n:7},n.s2={face:k.Face.F,n:6},n.s3={face:k.Face.F,n:8};break;case"D2":n.s1={face:k.Face.F,n:6},n.s2={face:k.Face.R,n:8},n.s3={face:k.Face.R,n:6};break;case"L":n.s1={face:k.Face.U,n:3},n.s2={face:k.Face.F,n:6},n.s3={face:k.Face.F,n:0};break;case"L'":n.s1={face:k.Face.F,n:6},n.s2={face:k.Face.U,n:3},n.s3={face:k.Face.F,n:0};break;case"L2":n.s1={face:k.Face.F,n:6},n.s2={face:k.Face.U,n:0},n.s3={face:k.Face.U,n:6};break;case"B":n.s1={face:k.Face.R,n:8},n.s2={face:k.Face.U,n:1},n.s3={face:k.Face.R,n:2};break;case"B'":n.s1={face:k.Face.U,n:1},n.s2={face:k.Face.R,n:8},n.s3={face:k.Face.R,n:2};break;case"B2":n.s1={face:k.Face.R,n:8},n.s2={face:k.Face.U,n:0},n.s3={face:k.Face.U,n:2};break;default:n.s1={face:k.Face.U,n:2},n.s2={face:k.Face.U,n:6},n.s3={face:k.Face.U,n:8}}else if(2==i)switch(n.move){case"U":n.s1={face:k.Face.R,n:1},n.s2={face:k.Face.F,n:1},n.s3={face:k.Face.R,n:2};break;case"U'":n.s1={face:k.Face.F,n:1},n.s2={face:k.Face.R,n:1},n.s3={face:k.Face.R,n:2};break;case"U2":n.s1={face:k.Face.R,n:1},n.s2={face:k.Face.F,n:0},n.s3={face:k.Face.R,n:2};break;case"R":n.s1={face:k.Face.F,n:3},n.s2={face:k.Face.U,n:3},n.s3={face:k.Face.F,n:0};break;case"R'":n.s1={face:k.Face.U,n:3},n.s2={face:k.Face.F,n:3},n.s3={face:k.Face.F,n:0};break;case"R2":n.s1={face:k.Face.F,n:3},n.s2={face:k.Face.U,n:1},n.s3={face:k.Face.F,n:0};break;case"D":n.s1={face:k.Face.F,n:2},n.s2={face:k.Face.R,n:2},n.s3={face:k.Face.D,n:1};break;case"D'":n.s1={face:k.Face.R,n:2},n.s2={face:k.Face.F,n:2},n.s3={face:k.Face.D,n:1};break;case"D2":n.s1={face:k.Face.F,n:2},n.s2={face:k.Face.R,n:3},n.s3={face:k.Face.D,n:1};break;case"L":n.s1={face:k.Face.U,n:2},n.s2={face:k.Face.F,n:2},n.s3={face:k.Face.L,n:1};break;case"L'":n.s1={face:k.Face.F,n:2},n.s2={face:k.Face.U,n:2},n.s3={face:k.Face.L,n:1};break;case"L2":n.s1={face:k.Face.F,n:2},n.s2={face:k.Face.U,n:0},n.s3={face:k.Face.L,n:1};break;default:n.s1={face:0,n:2},n.s2={face:0,n:6},n.s3={face:0,n:8}}else if(4==i)switch(n.move){case"x":case"M'":n.s1={face:k.Face.F,n:6},n.s2={face:k.Face.U,n:6},n.s3={face:k.Face.L,n:i-1};break;case"x'":case"M":n.s1={face:k.Face.U,n:6},n.s2={face:k.Face.F,n:6},n.s3={face:k.Face.L,n:i-1};break;case"x2":case"M2":n.s1={face:k.Face.F,n:13},n.s2={face:k.Face.U,n:2},n.s3={face:k.Face.L,n:i-1},n.influence=5;break;case"y":case"E'":n.s1={face:k.Face.R,n:6},n.s2={face:k.Face.F,n:6},n.s3={face:k.Face.D,n:i-1};break;case"y'":case"E":n.s1={face:k.Face.F,n:6},n.s2={face:k.Face.R,n:6},n.s3={face:k.Face.D,n:i-1};break;case"y2":case"E2":n.s1={face:k.Face.R,n:11},n.s2={face:k.Face.F,n:4},n.s3={face:k.Face.D,n:i-1},n.influence=5;break;case"z":case"S":n.s1={face:k.Face.U,n:6},n.s2={face:k.Face.R,n:6},n.s3={face:k.Face.B,n:0},n.influence=5;break;case"z'":case"S'":n.s1={face:k.Face.R,n:6},n.s2={face:k.Face.U,n:6},n.s3={face:k.Face.B,n:0},n.influence=5;break;case"z2":case"S2":n.s1={face:k.Face.U,n:4},n.s2={face:k.Face.R,n:13},n.s3={face:k.Face.B,n:0},n.influence=7;break;case"U":n.s1={face:k.Face.R,n:0},n.s2={face:k.Face.F,n:0},n.s3={face:k.Face.R,n:6},n.influence=5;break;case"U'":n.s1={face:k.Face.F,n:0},n.s2={face:k.Face.R,n:0},n.s3={face:k.Face.F,n:6};break;case"U2":n.s1={face:k.Face.R,n:i-1},n.s2={face:k.Face.F,n:0},n.s3={face:k.Face.F,n:i-1};break;case"R":n.s1={face:k.Face.F,n:i*i-1},n.s2={face:k.Face.U,n:i*i-1},n.s3={face:k.Face.F,n:6};break;case"R'":n.s1={face:k.Face.U,n:i*i-1},n.s2={face:k.Face.F,n:i*i-1},n.s3={face:k.Face.F,n:6};break;case"R2":n.s1={face:k.Face.F,n:i*i-1},n.s2={face:k.Face.U,n:i-1},n.s3={face:k.Face.U,n:i*i-1};break;case"F":n.s1={face:k.Face.U,n:i*i-i},n.s2={face:k.Face.R,n:0},n.s3={face:k.Face.U,n:6};break;case"F'":n.s1={face:k.Face.R,n:0},n.s2={face:k.Face.U,n:i*i-i},n.s3={face:k.Face.U,n:6};break;case"F2":n.s1={face:k.Face.U,n:i*i-i},n.s2={face:k.Face.R,n:i*i-i},n.s3={face:k.Face.R,n:0};break;case"D":n.s1={face:k.Face.F,n:i*i-i},n.s2={face:k.Face.R,n:13},n.s3={face:k.Face.F,n:i*i-1};break;case"D'":n.s1={face:k.Face.R,n:13},n.s2={face:k.Face.F,n:i*i-i},n.s3={face:k.Face.F,n:i*i-1};break;case"D2":n.s1={face:k.Face.F,n:i*i-i},n.s2={face:k.Face.R,n:i*i-1},n.s3={face:k.Face.R,n:i*i-i};break;case"L":n.s1={face:k.Face.U,n:4},n.s2={face:k.Face.F,n:i*i-i},n.s3={face:k.Face.F,n:0};break;case"L'":n.s1={face:k.Face.F,n:i*i-i},n.s2={face:k.Face.U,n:4},n.s3={face:k.Face.F,n:0};break;case"L2":n.s1={face:k.Face.F,n:i*i-i},n.s2={face:k.Face.U,n:0},n.s3={face:k.Face.U,n:i*i-i};break;case"B":n.s1={face:k.Face.R,n:i*i-1},n.s2={face:k.Face.U,n:2},n.s3={face:k.Face.R,n:i-1};break;case"B'":n.s1={face:k.Face.U,n:2},n.s2={face:k.Face.R,n:i*i-1},n.s3={face:k.Face.R,n:i-1};break;case"B2":n.s1={face:k.Face.R,n:i*i-1},n.s2={face:k.Face.U,n:0},n.s3={face:k.Face.U,n:i-1};break;default:n.s1={face:k.Face.U,n:i-1},n.s2={face:k.Face.U,n:i*i-i},n.s3={face:k.Face.U,n:i*i-1}}var r,a=Math.floor(n.s1.n/i),s=n.s1.n%i,o=[(e[n.s1.face][s][a][0]+e[n.s1.face][s+1][a+1][0])/2,(e[n.s1.face][s][a][1]+e[n.s1.face][s+1][a+1][1])/2,0],c=Math.floor(n.s2.n/i),u=n.s2.n%i,h=[(e[n.s2.face][u][c][0]+e[n.s2.face][u+1][c+1][0])/2,(e[n.s2.face][u][c][1]+e[n.s2.face][u+1][c+1][1])/2,0],f=[(o[0]+h[0])/2,(o[1]+h[1])/2,0];if(o=y.transScale(o,f,n.scale/10),h=y.transScale(h,f,n.scale/10),n.s3){var l=Math.floor(n.s3.n/i),d=n.s3.n%i;r=[(e[n.s3.face][d][l][0]+e[n.s3.face][d+1][l+1][0])/2,(e[n.s3.face][d][l][1]+e[n.s3.face][d+1][l+1][1])/2,0],r=y.transScale(r,f,n.influence/5)}var p=r||o,F=p[1]>h[1]?270:90;h[0]-p[0]!=0&&(F=y.radians2Degrees(Math.atan((h[1]-p[1])/(h[0]-p[0]))),F=p[0]>h[0]?F+180:F);var m=t.path("M "+o[0]+","+o[1]+" "+(r?"Q "+r[0]+","+r[1]:"L")+" "+h[0]+","+h[1]);m.fill("none"),m.stroke({color:n.color,opacity:1});var v=t.path("M 5.77,0.0 L -2.88,5.0 L -2.88,-5.0 L 5.77,0.0 z");v.attr({transform:"translate("+h[0]+","+h[1]+") scale("+.033/i+") rotate("+F+")"}),v.style({fill:n.color}),v.attr({"stroke-width":0,"stroke-linejoin":"round"})}e.renderCube=function(t,e,n){var i,r=w.rotateFaces(S,n.viewportRotations),a=(i=r,k.AllFaces.slice().sort(function(t,e){return i[e][2]-i[t][2]})),s=x(t).size(n.width,n.height);s.viewbox(n.viewbox.x,n.viewbox.y,n.viewbox.width,n.viewbox.height);var o,c,u=a.filter(function(t){return!M(t,r)}),h=a.filter(function(t){return M(t,r)});if(o=n,(c=s.rect(o.viewbox.width,o.viewbox.height)).x(o.viewbox.x),c.y(o.viewbox.y),o.backgroundColor?c.fill({color:o.backgroundColor}):(c.fill("none"),c.opacity(0)),n.cubeOpacity<100){var f=L(s,n);u.forEach(function(t){R(s,t,e[t],n),A(f,e[t],n)})}var l,d,p=L(s,n);if(h.forEach(function(t){A(p,e[t],n),R(s,t,e[t],n)}),"plan"===n.view){var F=(l=n,(d=s.group()).opacity(l.stickerOpacity/100),d.attr({"stroke-opacity":"1","stroke-width":.02,"stroke-linejoin":"round"}),d);[k.Face.R,k.Face.F,k.Face.L,k.Face.B].forEach(function(t){D(F,t,e[t],r,n)})}var m,v,y,g=(m=s,v=e[0].length-1,(y=m.group()).attr({opacity:1,"stroke-opacity":1,"stroke-width":.12/v,"stroke-linecap":"round"}),y),b=[];Array.isArray(n.arrows)?b=n.arrows:"string"==typeof n.arrows&&(b=C.parseArrows(n.arrows)),b.forEach(function(t){U(g,e,t)})},e.renderOLLStickers=D,e.renderArrow=U},function(t,e,n){var i,r;r="undefined"!=typeof window?window:this,void 0===(i=function(){return function(s,r){var f=(void 0!==this?this:s).SVG=function(t){if(f.supported)return t=new f.Doc(t),f.parser.draw||f.prepare(),t};if(f.ns="http://www.w3.org/2000/svg",f.xmlns="http://www.w3.org/2000/xmlns/",f.xlink="http://www.w3.org/1999/xlink",f.svgjs="http://svgjs.com/svgjs",f.supported=!!r.createElementNS&&!!r.createElementNS(f.ns,"svg").createSVGRect,!f.supported)return!1;f.did=1e3,f.eid=function(t){return"Svgjs"+o(t)+f.did++},f.create=function(t){var e=r.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},f.extend=function(){var t,e,n,i;for(e=(t=[].slice.call(arguments)).pop(),i=t.length-1;0<=i;i--)if(t[i])for(n in e)t[i].prototype[n]=e[n];f.Set&&f.Set.inherit&&f.Set.inherit()},f.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,f.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&f.extend(e,t.extend),t.construct&&f.extend(t.parent||f.Container,t.construct),e},f.adopt=function(t){return t?t.instance?t.instance:((e="svg"==t.nodeName?t.parentNode instanceof s.SVGElement?new f.Nested:new f.Doc:"linearGradient"==t.nodeName?new f.Gradient("linear"):"radialGradient"==t.nodeName?new f.Gradient("radial"):f[o(t.nodeName)]?new(f[o(t.nodeName)]):new f.Element(t)).type=t.nodeName,((e.node=t).instance=e)instanceof f.Doc&&e.namespace().defs(),e.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),e):null;var e},f.prepare=function(){var t=r.getElementsByTagName("body")[0],e=(t?new f.Doc(t):f.adopt(r.documentElement).nested()).size(2,0);f.parser={body:t||r.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:e.polyline().node,path:e.path().node,native:f.create("svg")}},f.parser={native:f.create("svg")},r.addEventListener("DOMContentLoaded",function(){f.parser.draw||f.prepare()},!1),f.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},f.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r},filter:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof s.SVGElement})}},f.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},f.Color=function(t){var e,n;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?f.regex.isRgb.test(t)?(e=f.regex.rgb.exec(t.replace(f.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):f.regex.isHex.test(t)&&(e=f.regex.hex.exec(4==(n=t).length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},f.extend(f.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+h(this.r)+h(this.g)+h(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new f.Color(t),this},at:function(t){return this.destination?(t=t<0?0:1<t?1:t,new f.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),f.Color.test=function(t){return t+="",f.regex.isHex.test(t)||f.regex.isRgb.test(t)},f.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},f.Color.isColor=function(t){return f.Color.isRgb(t)||f.Color.test(t)},f.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},f.extend(f.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];e<n;e++)i.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new f.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(f.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(e){for(var n=e.slice(0),i=n.length;i--;)Array.isArray(n[i])&&(n[i]=t(n[i]));return n}(this.value),t}}),f.PointArray=function(t,e){f.Array.call(this,t,e||[[0,0]])},f.PointArray.prototype=new f.Array,f.PointArray.prototype.constructor=f.PointArray,f.extend(f.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];e<n;e++)i.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new f.PointArray(i)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(f.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,i=t.length;n<i;n+=2)e.push([t[n],t[n+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;0<=i;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;0<=n;n--)i.width&&(this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x),i.height&&(this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){return f.parser.poly.setAttribute("points",this.toString()),f.parser.poly.getBBox()}});for(var c={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},t="mlhvqtcsaz".split(""),e=0,n=t.length;e<n;++e)c[t[e]]=function(a){return function(t,e,n){if("H"==a)t[0]=t[0]+e.x;else if("V"==a)t[0]=t[0]+e.y;else if("A"==a)t[5]=t[5]+e.x,t[6]=t[6]+e.y;else for(var i=0,r=t.length;i<r;++i)t[i]=t[i]+(i%2?e.y:e.x);return c[a](t,e,n)}}(t[e].toUpperCase());f.PathArray=function(t,e){f.Array.call(this,t,e||[["M",0,0]])},f.PathArray.prototype=new f.Array,f.PathArray.prototype.constructor=f.PathArray,f.extend(f.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;0<=r;r--)"M"==(i=this.value[r][0])||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;0<=n;n--)"M"==(i=this.value[n][0])||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,n,i;for(t=new f.PathArray(t),i=this.value.length===t.value.length,e=0,n=this.value.length;i&&e<n;e++)i=this.value[e][0]===t.value[e][0];return i},morph:function(t){return t=new f.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,i,r,a=this.value,s=this.destination.value,o=[],c=new f.PathArray;for(e=0,n=a.length;e<n;e++){for(o[e]=[a[e][0]],i=1,r=a[e].length;i<r;i++)o[e][i]=a[e][i]+(s[e][i]-a[e][i])*t;"A"===o[e][0]&&(o[e][4]=+(0!=o[e][4]),o[e][5]=+(0!=o[e][5]))}return c.value=o,c},parse:function(t){if(t instanceof f.PathArray)return t.valueOf();var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(f.regex.numbersWithDots,u).replace(f.regex.pathLetters," $& ").replace(f.regex.hyphen,"$1 -").trim().split(f.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);for(var i=[],r=new f.Point,a=new f.Point,s=0,o=t.length;f.regex.isPathLetter.test(t[s])?(e=t[s],++s):"M"==e?e="L":"m"==e&&(e="l"),i.push(c[e].call(null,t.slice(s,s+=n[e.toUpperCase()]).map(parseFloat),r,a)),s<o;);return i},bbox:function(){return f.parser.path.setAttribute("d",this.toString()),f.parser.path.getBBox()}}),f.Number=f.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(f.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof f.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new f.Number(t),new f.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new f.Number(t),new f.Number(this-t,this.unit||t.unit)},times:function(t){return t=new f.Number(t),new f.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new f.Number(t),new f.Number(this/t,this.unit||t.unit)},to:function(t){var e=new f.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new f.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new f.Number(this.destination).minus(this).times(t).plus(this):this}}}),f.Element=f.invent({create:function(t){this._stroke=f.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=t)&&(this.type=t.nodeName,(this.node.instance=this)._events=t._events||{},this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=l(this,t,e);return this.width(new f.Number(n.width)).height(new f.Number(n.height))},clone:function(t){this.writeDataToDom();var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(f.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!=e}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return f.get(this.attr(t))},parent:function(t){var e=this;if(!e.node.parentNode)return null;if(e=f.adopt(e.node.parentNode),!t)return e;for(;e&&e.node instanceof s.SVGElement;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"==e.node.parentNode.nodeName||"#document-fragment"==e.node.parentNode.nodeName)return null;e=f.adopt(e.node.parentNode)}},doc:function(){return this instanceof f.Doc?this:this.parent(f.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return n=t,((e=this.node).matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,n);var e,n},native:function(){return this.node},svg:function(t){var e=r.createElement("svg");if(!(t&&this instanceof f.Parent))return e.appendChild(t=r.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,i=e.firstChild.childNodes.length;n<i;n++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return this instanceof t}}}),f.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},f.morph=function(n){return function(t,e){return new f.MorphObj(t,e).at(n)}},f.Situation=f.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new f.Number(t.duration).valueOf(),this.delay=new f.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),f.FX=f.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,n){"object"==typeof t&&(e=t.ease,n=t.delay,t=t.duration);var i=new f.Situation({duration:t||1e3,delay:n||0,ease:f.easing[e||"-"]||e});return this.queue(i),this},delay:function(t){var e=new f.Situation({duration:t,delay:0,ease:f.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof f.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=s.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){s.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof f.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof f.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,n,i=this.situation;if(i.init)return this;for(t in i.animations)for(n=this.target()[t](),Array.isArray(n)||(n=[n]),Array.isArray(i.animations[t])||(i.animations[t]=[i.animations[t]]),e=n.length;e--;)i.animations[t][e]instanceof f.Number&&(n[e]=new f.Number(n[e])),i.animations[t][e]=n[e].morph(i.animations[t][e]);for(t in i.attrs)i.attrs[t]=new f.MorphObj(this.target().attr(t),i.attrs[t]);for(t in i.styles)i.styles[t]=new f.MorphObj(this.target().style(t),i.styles[t]);return i.initialTransformation=this.target().matrixify(),i.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(n){var i=this.last();return this.target().on("finished.fx",function t(e){e.detail.situation==i&&(n.call(this,i),this.off("finished.fx",t))}),this._callStart()},during:function(e){var n=this.last(),t=function(t){t.detail.situation==n&&e.call(this,t.detail.pos,f.morph(t.detail.pos),t.detail.eased,n)};return this.target().off("during.fx",t).on("during.fx",t),this.after(function(){this.off("during.fx",t)}),this._callStart()},afterAll:function(n){var t=function t(e){n.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},duringAll:function(e){var t=function(t){e.call(this,t.detail.pos,f.morph(t.detail.pos),t.detail.eased,t.detail.situation)};return this.target().off("during.fx",t).on("during.fx",t),this.afterAll(function(){this.off("during.fx",t)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,i;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var a in this.situation.once)a>this.lastPos&&a<=r&&(this.situation.once[a].call(this.target(),this.pos,r),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation&&(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r),this},eachAt:function(){var t,e,n,i=this,r=this.target(),a=this.situation;for(t in a.animations)n=[].concat(a.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(i.pos),i.pos):t}),r[t].apply(r,n);for(t in a.attrs)n=[t].concat(a.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(i.pos),i.pos):t}),r.attr.apply(r,n);for(t in a.styles)n=[t].concat(a.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(i.pos),i.pos):t}),r.style.apply(r,n);if(a.transforms.length){for(n=a.initialTransformation,t=0,e=a.transforms.length;t<e;t++){var s=a.transforms[t];n=s instanceof f.Matrix?s.relative?n.multiply((new f.Matrix).morph(s).at(a.ease(this.pos))):n.morph(s).at(a.ease(this.pos)):(s.relative||s.undo(n.extract()),n.multiply(s.at(a.ease(this.pos))))}r.matrix(n)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:f.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new f.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new f.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),f.MorphObj=f.invent({create:function(t,e){return f.Color.isColor(e)?new f.Color(t).morph(e):f.regex.delimiter.test(t)?f.regex.pathLetters.test(t)?new f.PathArray(t).morph(e):new f.Array(t).morph(e):f.regex.numberAndUnit.test(e)?new f.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),f.extend(f.FX,{attr:function(t,e,n){if("object"==typeof t)for(var i in t)this.attr(i,t[i]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof f.G)return this.transform({x:t},e),this;var n=new f.Number(t);return n.relative=e,this.add("x",n)},y:function(t,e){if(this.target()instanceof f.G)return this.transform({y:t},e),this;var n=new f.Number(t);return n.relative=e,this.add("y",n)},cx:function(t){return this.add("cx",new f.Number(t))},cy:function(t){return this.add("cy",new f.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var n;return this.target()instanceof f.Text?this.attr("font-size",t):(t&&e||(n=this.target().bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.add("width",new f.Number(t)).add("height",new f.Number(e))),this},width:function(t){return this.add("width",new f.Number(t))},height:function(t){return this.add("height",new f.Number(t))},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new f.Number(t)):this},viewbox:function(t,e,n,i){return this.target()instanceof f.Container&&this.add("viewbox",new f.ViewBox(t,e,n,i)),this},update:function(t){if(this.target()instanceof f.Stop){if("number"==typeof t||t instanceof f.Number)return this.update({offset:t,color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),f.Box=f.invent({create:function(t,e,n,i){if(!("object"!=typeof t||t instanceof f.Element))return f.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=n,this.height=i),v(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,v(e)},transform:function(e){var t,n=1/0,i=-1/0,r=1/0,a=-1/0;return[new f.Point(this.x,this.y),new f.Point(this.x2,this.y),new f.Point(this.x,this.y2),new f.Point(this.x2,this.y2)].forEach(function(t){t=t.transform(e),n=Math.min(n,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),a=Math.max(a,t.y)}),(t=new this.constructor).x=n,t.width=i-n,t.y=r,t.height=a-r,v(t),t}}}),f.BBox=f.invent({create:function(t){if(f.Box.apply(this,[].slice.call(arguments)),t instanceof f.Element){var e;try{if(r.documentElement.contains){if(!r.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=r)throw new Exception("Element not in the dom")}e=t.node.getBBox()}catch(n){if(t instanceof f.Shape){var i=t.clone(f.parser.draw.instance).show();e=i.node.getBBox(),i.remove()}else e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}f.Box.call(this,e)}},inherit:f.Box,parent:f.Element,construct:{bbox:function(){return new f.BBox(this)}}}),f.BBox.prototype.constructor=f.BBox,f.extend(f.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),f.RBox=f.invent({create:function(t){f.Box.apply(this,[].slice.call(arguments)),t instanceof f.Element&&f.Box.call(this,t.node.getBoundingClientRect())},inherit:f.Box,parent:f.Element,extend:{addOffset:function(){return this.x+=s.pageXOffset,this.y+=s.pageYOffset,this}},construct:{rbox:function(t){return t?new f.RBox(this).transform(t.screenCTM().inverse()):new f.RBox(this).addOffset()}}}),f.RBox.prototype.constructor=f.RBox,f.Matrix=f.invent({create:function(t){var e,n=p([1,0,0,1,0,0]);for(t=t instanceof f.Element?t.matrixify():"string"==typeof t?p(t.split(f.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):"object"==typeof t?t:n,e=g.length-1;0<=e;--e)this[g[e]]=null!=t[g[e]]?t[g[e]]:n[g[e]]},extend:{extract:function(){var t=d(this,0,1),e=d(this,1,0),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new f.Matrix(this)}},clone:function(){return new f.Matrix(this)},morph:function(t){return this.destination=new f.Matrix(t),this},at:function(t){return this.destination?new f.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new f.Matrix(this.native().multiply((e=t,e instanceof f.Matrix||(e=new f.Matrix(e)),e).native()));var e},inverse:function(){return new f.Matrix(this.native().inverse())},translate:function(t,e){return new f.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),this.around(n,i,new f.Matrix(t,0,0,e,0,0))},rotate:function(t,e,n){return t=f.utils.radians(t),this.around(e,n,new f.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),t=f.utils.radians(t),e=f.utils.radians(e),this.around(n,i,new f.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,n){return this.multiply(new f.Matrix(1,0,0,1,t||0,e||0)).multiply(n).multiply(new f.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=f.parser.native.createSVGMatrix(),e=g.length-1;0<=e;e--)t[g[e]]=this[g[e]];return t},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:f.Element,construct:{ctm:function(){return new f.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof f.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new f.Matrix(e)}return new f.Matrix(this.node.getScreenCTM())}}}),f.Point=f.invent({create:function(t,e){var n;n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new f.Point(this)},morph:function(t,e){return this.destination=new f.Point(t,e),this},at:function(t){return this.destination?new f.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=f.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new f.Point(this.native().matrixTransform(t.native()))}}}),f.extend(f.Element,{point:function(t,e){return new f.Point(t,e).transform(this.screenCTM().inverse())}}),f.extend(f.Element,{attr:function(t,e,n){if(null==t){for(t={},n=(e=this.node.attributes).length-1;0<=n;n--)t[e[n].nodeName]=f.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?f.defaults.attrs[t]:f.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",0<parseFloat(e)?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(f.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof f.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new f.Number(e):f.Color.isColor(e)?e=new f.Color(e):Array.isArray(e)&&(e=new f.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),f.extend(f.Element,{transform:function(t,e){var n,i;if("object"!=typeof t)return n=new f.Matrix(this).extract(),"string"==typeof t?n[t]:n;if(n=new f.Matrix(this),e=!!e||!!t.relative,null!=t.a)n=e?n.multiply(new f.Matrix(t)):new f.Matrix(t);else if(null!=t.rotation)F(t,this),n=e?n.rotate(t.rotation,t.cx,t.cy):n.rotate(t.rotation-n.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(F(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var r=n.extract();t.scaleX=1*t.scaleX/r.scaleX,t.scaleY=1*t.scaleY/r.scaleY}n=n.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else null!=t.skew||null!=t.skewX||null!=t.skewY?(F(t,this),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,e||(r=n.extract(),n=n.multiply((new f.Matrix).skew(r.skewX,r.skewY,t.cx,t.cy).inverse())),n=n.skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?this.bbox()["c"+t.flip]:t.offset:null==t.offset?(i=this.bbox(),t.flip=i.cx,t.offset=i.cy):t.flip=t.offset,n=(new f.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?n=n.translate(t.x,t.y):(null!=t.x&&(n.e=t.x),null!=t.y&&(n.f=t.y)));return this.attr("transform",n)}}),f.extend(f.FX,{transform:function(t,e){var n,i,r=this.target();return"object"!=typeof t?(n=new f.Matrix(r).extract(),"string"==typeof t?n[t]:n):(e=!!e||!!t.relative,null!=t.a?n=new f.Matrix(t):null!=t.rotation?(F(t,r),n=new f.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(F(t,r),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,n=new f.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(F(t,r),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,n=new f.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?r.bbox()["c"+t.flip]:t.offset:null==t.offset?(i=r.bbox(),t.flip=i.cx,t.offset=i.cy):t.flip=t.offset,n=(new f.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(n=new f.Translate(t.x,t.y)),n?(n.relative=e,this.last().transforms.push(n),this._callStart()):this)}}),f.extend(f.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(f.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(f.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])},new f.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),f.Transformation=f.invent({create:function(t,e){if(1<arguments.length&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[this.arguments[n]];!(this.inversed=!1)===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],n=0,i=this.arguments.length;n<i;++n)e.push(this[this.arguments[n]]);var r=this._undo||new f.Matrix;return r=(new f.Matrix).morph(f.Matrix.prototype[this.method].apply(r,e)).at(t),this.inversed?r.inverse():r},undo:function(t){for(var e=0,n=this.arguments.length;e<n;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(f[o(this.method)])(t,!0).at(1),this}}}),f.Translate=f.invent({parent:f.Matrix,inherit:f.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),f.Rotate=f.invent({parent:f.Matrix,inherit:f.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new f.Matrix).rotate((new f.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),f.Scale=f.invent({parent:f.Matrix,inherit:f.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),f.Skew=f.invent({parent:f.Matrix,inherit:f.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),f.extend(f.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!f.regex.isCss.test(t))return this.node.style[a(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[a(t)]=null===e||f.regex.isBlank.test(e)?"":e;return this}}),f.Parent=f.invent({create:function(t){this.constructor.call(this,t)},inherit:f.Element,extend:{children:function(){return f.utils.map(f.utils.filterSVGElements(this.node.childNodes),function(t){return f.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return 0<=this.index(t)},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return f.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var n,i,r=this.children();for(n=0,i=r.length;n<i;n++)r[n]instanceof f.Element&&t.apply(r[n],[n,r]),e&&r[n]instanceof f.Container&&r[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),f.extend(f.Parent,{ungroup:function(t,e){return 0===e||this instanceof f.Defs||this.node==f.parser.draw||(t=t||(this instanceof f.Doc?this:this.parent(f.Parent)),e=e||1/0,this.each(function(){return this instanceof f.Defs?this:this instanceof f.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),f.Container=f.invent({create:function(t){this.constructor.call(this,t)},inherit:f.Parent}),f.ViewBox=f.invent({create:function(t){var e,n,i,r,a,s,o,c=1,u=1,h=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof f.Element){for(a=((o=s=t).attr("viewBox")||"").match(h),t.bbox,i=new f.Number(t.width()),r=new f.Number(t.height());"%"==i.unit;)c*=i.value,i=new f.Number(s instanceof f.Doc?s.parent().offsetWidth:s.parent().width()),s=s.parent();for(;"%"==r.unit;)u*=r.value,r=new f.Number(o instanceof f.Doc?o.parent().offsetHeight:o.parent().height()),o=o.parent();this.x=0,this.y=0,this.width=i*c,this.height=r*u,this.zoom=1,a&&(e=parseFloat(a[0]),n=parseFloat(a[1]),i=parseFloat(a[2]),r=parseFloat(a[3]),this.zoom=this.width/this.height>i/r?this.height/r:this.width/i,this.x=e,this.y=n,this.width=i,this.height=r)}else t="string"==typeof t?t.match(h).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,n,i){return this.destination=new f.ViewBox(t,e,n,i),this},at:function(t){return this.destination?new f.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:f.Container,construct:{viewbox:function(t,e,n,i){return 0==arguments.length?new f.ViewBox(this):this.attr("viewBox",new f.ViewBox(t,e,n,i))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(e){f.Element.prototype[e]=function(t){return null==t?f.off(this,e):f.on(this,e,t),this}}),f.listenerId=0,f.on=function(t,e,i,n,r){var a=i.bind(n||t),s=t instanceof f.Element?t.node:t;s.instance=s.instance||{_events:{}};var o=s.instance._events;i._svgjsListenerId||(i._svgjsListenerId=++f.listenerId),e.split(f.regex.delimiter).forEach(function(t){var e=t.split(".")[0],n=t.split(".")[1]||"*";o[e]=o[e]||{},o[e][n]=o[e][n]||{},o[e][n][i._svgjsListenerId]=a,s.addEventListener(e,a,r||!1)})},f.off=function(t,e,a,s){var o=t instanceof f.Element?t.node:t;if(o.instance&&("function"!=typeof a||(a=a._svgjsListenerId))){var c=o.instance._events;(e||"").split(f.regex.delimiter).forEach(function(t){var e,n,i=t&&t.split(".")[0],r=t&&t.split(".")[1];if(a)c[i]&&c[i][r||"*"]&&(o.removeEventListener(i,c[i][r||"*"][a],s||!1),delete c[i][r||"*"][a]);else if(i&&r){if(c[i]&&c[i][r]){for(n in c[i][r])f.off(o,[i,r].join("."),n);delete c[i][r]}}else if(r)for(t in c)for(e in c[t])r===e&&f.off(o,[t,r].join("."));else if(i){if(c[i]){for(e in c[i])f.off(o,[i,e].join("."));delete c[i]}}else{for(t in c)f.off(o,t);o.instance._events={}}})}},f.extend(f.Element,{on:function(t,e,n,i){return f.on(this,t,e,n,i),this},off:function(t,e){return f.off(this.node,t,e),this},fire:function(t,e){return t instanceof s.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new f.CustomEvent(t,{detail:e,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),f.Defs=f.invent({create:"defs",inherit:f.Container}),f.G=f.invent({create:"g",inherit:f.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new f.G)}}}),f.Doc=f.invent({create:function(t){t&&("svg"==(t="string"==typeof t?r.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,f.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:f.Container,extend:{namespace:function(){return this.attr({xmlns:f.ns,version:"1.1"}).attr("xmlns:xlink",f.xlink,f.xmlns).attr("xmlns:svgjs",f.svgjs,f.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=f.adopt(t):this._defs=new f.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,f.parser.draw.parentNode||this.node.appendChild(f.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=m(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),f.extend(f.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof f.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return 0<t&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof f.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return 0<this.position()&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),f.Mask=f.invent({create:function(){this.constructor.call(this,f.create("mask")),this.targets=[]},inherit:f.Container,extend:{remove:function(){for(var t=this.targets.length-1;0<=t;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],f.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new f.Mask)}}}),f.extend(f.Element,{maskWith:function(t){return this.masker=t instanceof f.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),f.ClipPath=f.invent({create:function(){this.constructor.call(this,f.create("clipPath")),this.targets=[]},inherit:f.Container,extend:{remove:function(){for(var t=this.targets.length-1;0<=t;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new f.ClipPath)}}}),f.extend(f.Element,{clipWith:function(t){return this.clipper=t instanceof f.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),f.Gradient=f.invent({create:function(t){this.constructor.call(this,f.create(t+"Gradient")),this.type=t},inherit:f.Container,extend:{at:function(t,e,n){return this.put(new f.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),f.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),f.extend(f.Gradient,f.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new f.Number(t),fy:new f.Number(e)}):this.attr({x1:new f.Number(t),y1:new f.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new f.Number(t),cy:new f.Number(e)}):this.attr({x2:new f.Number(t),y2:new f.Number(e)})}}),f.extend(f.Defs,{gradient:function(t,e){return this.put(new f.Gradient(t)).update(e)}}),f.Stop=f.invent({create:"stop",inherit:f.Element,extend:{update:function(t){return("number"==typeof t||t instanceof f.Number)&&(t={offset:t,color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new f.Number(t.offset)),this}}}),f.Pattern=f.invent({create:"pattern",inherit:f.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),f.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),f.extend(f.Defs,{pattern:function(t,e,n){return this.put(new f.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),f.Shape=f.invent({create:function(t){this.constructor.call(this,t)},inherit:f.Element}),f.Bare=f.invent({create:function(t,e){if(this.constructor.call(this,f.create(t)),e)for(var n in e.prototype)"function"==typeof e.prototype[n]&&(this[n]=e.prototype[n])},inherit:f.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(r.createTextNode(t)),this}}}),f.extend(f.Parent,{element:function(t,e){return this.put(new f.Bare(t,e))}}),f.Symbol=f.invent({create:"symbol",inherit:f.Container,construct:{symbol:function(){return this.put(new f.Symbol)}}}),f.Use=f.invent({create:"use",inherit:f.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,f.xlink)}},construct:{use:function(t,e){return this.put(new f.Use).element(t,e)}}}),f.Rect=f.invent({create:"rect",inherit:f.Shape,construct:{rect:function(t,e){return this.put(new f.Rect).size(t,e)}}}),f.Circle=f.invent({create:"circle",inherit:f.Shape,construct:{circle:function(t){return this.put(new f.Circle).rx(new f.Number(t).divide(2)).move(0,0)}}}),f.extend(f.Circle,f.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),f.Ellipse=f.invent({create:"ellipse",inherit:f.Shape,construct:{ellipse:function(t,e){return this.put(new f.Ellipse).size(t,e).move(0,0)}}}),f.extend(f.Ellipse,f.Rect,f.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),f.extend(f.Circle,f.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new f.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new f.Number(t).divide(2))},size:function(t,e){var n=l(this,t,e);return this.rx(new f.Number(n.width).divide(2)).ry(new f.Number(n.height).divide(2))}}),f.Line=f.invent({create:"line",inherit:f.Shape,extend:{array:function(){return new f.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,i){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:i}:new f.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=l(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,i){return f.Line.prototype.plot.apply(this.put(new f.Line),null!=t?[t,e,n,i]:[0,0,0,0])}}}),f.Polyline=f.invent({create:"polyline",inherit:f.Shape,construct:{polyline:function(t){return this.put(new f.Polyline).plot(t||new f.PointArray)}}}),f.Polygon=f.invent({create:"polygon",inherit:f.Shape,construct:{polygon:function(t){return this.put(new f.Polygon).plot(t||new f.PointArray)}}}),f.extend(f.Polyline,f.Polygon,{array:function(){return this._array||(this._array=new f.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new f.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=l(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),f.extend(f.Line,f.Polyline,f.Polygon,{morphArray:f.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),f.Path=f.invent({create:"path",inherit:f.Shape,extend:{morphArray:f.PathArray,array:function(){return this._array||(this._array=new f.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new f.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=l(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new f.Path).plot(t||new f.PathArray)}}}),f.Image=f.invent({create:"image",inherit:f.Shape,extend:{load:function(e){if(!e)return this;var n=this,i=new s.Image;return f.on(i,"load",function(){f.off(i);var t=n.parent(f.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(i.width,i.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:i.width,height:i.height,ratio:i.width/i.height,url:e}))}),f.on(i,"error",function(t){f.off(i),"function"==typeof n._error&&n._error.call(n,t)}),this.attr("href",i.src=this.src=e,f.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new f.Image).load(t).size(e||0,n||e||0)}}}),f.Text=f.invent({create:function(){this.constructor.call(this,f.create("text")),this.dom.leading=new f.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",f.defaults.attrs["font-family"])},inherit:f.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t.valueOf()?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,n=0,i=e.length;n<i;++n)0!=n&&3!=e[n].nodeType&&1==f.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{n=0;for(var r=(t=t.split("\n")).length;n<r;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new f.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=f.utils.map(f.utils.filterSVGElements(t.childNodes),function(t){return f.adopt(t)});return new f.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,i=this.dom.leading*new f.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=i:(this.attr("dy",i+n),n=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new f.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new f.Text).text(t)},plain:function(t){return this.put(new f.Text).plain(t)}}}),f.Tspan=f.invent({create:"tspan",inherit:f.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(f.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),f.extend(f.Text,f.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(r.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new f.Tspan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),f.TextPath=f.invent({create:"textPath",inherit:f.Parent,parent:f.Text,construct:{morphArray:f.PathArray,path:function(t){for(var e=new f.TextPath,n=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+n,f.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return f.adopt(this.node.firstChild)}}}),f.Nested=f.invent({create:function(){this.constructor.call(this,f.create("svg")),this.style("overflow","visible")},inherit:f.Container,construct:{nested:function(){return this.put(new f.Nested)}}}),f.A=f.invent({create:"a",inherit:f.Container,extend:{to:function(t){return this.attr("href",t,f.xlink)},show:function(t){return this.attr("show",t,f.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new f.A).to(t)}}}),f.extend(f.Element,{linkTo:function(t){var e=new f.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),f.Marker=f.invent({create:"marker",inherit:f.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),f.extend(f.Defs,{marker:function(t,e,n){return this.put(new f.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),f.extend(f.Line,f.Polyline,f.Polygon,f.Path,{marker:function(t,e,n,i){var r=["marker"];return"all"!=t&&r.push(t),r=r.join("-"),t=e instanceof f.Marker?e:this.doc().marker(e,n,i),this.attr(r,t)}});var i={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function u(t,e,n,i){return n+i.replace(f.regex.dots," .")}function a(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function l(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function d(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function F(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function m(t){for(var e=t.childNodes.length-1;0<=e;e--)t.childNodes[e]instanceof s.SVGElement&&m(t.childNodes[e]);return f.adopt(t).id(f.eid(t.nodeName))}function v(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function y(t){return 1e-37<Math.abs(t)?t:0}["fill","stroke"].forEach(function(e){var n,t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||f.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(n=i[e].length-1;0<=n;n--)null!=t[i[e][n]]&&this.attr(i.prefix(e,i[e][n]),t[i[e][n]]);return this},f.extend(f.Element,f.FX,t)}),f.extend(f.Element,f.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new f.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new f.Number(t).plus(this instanceof f.FX?0:this.x()),!0)},dy:function(t){return this.y(new f.Number(t).plus(this instanceof f.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),f.extend(f.Rect,f.Ellipse,f.Circle,f.Gradient,f.FX,{radius:function(t,e){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new f.Number(t)):this.rx(t).ry(null==e?t:e)}}),f.extend(f.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),f.extend(f.Parent,f.Text,f.Tspan,f.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),f.Set=f.invent({create:function(t){t instanceof f.Set?this.members=t.members.slice():Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return-1<e&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return 0<=this.index(t)},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new f.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new f.Set(t)}}}),f.FX.Set=f.invent({create:function(t){this.set=t}}),f.Set.inherit=function(){var t=[];for(var e in f.Shape.prototype)"function"==typeof f.Shape.prototype[e]&&"function"!=typeof f.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(n){f.Set.prototype[n]=function(){for(var t=0,e=this.members.length;t<e;t++)this.members[t]&&"function"==typeof this.members[t][n]&&this.members[t][n].apply(this.members[t],arguments);return"animate"==n?this.fx||(this.fx=new f.FX.Set(this)):this}}),t=[],f.FX.prototype)"function"==typeof f.FX.prototype[e]&&"function"!=typeof f.FX.Set.prototype[e]&&t.push(e);t.forEach(function(n){f.FX.Set.prototype[n]=function(){for(var t=0,e=this.set.members.length;t<e;t++)this.set.members[t].fx[n].apply(this.set.members[t].fx,arguments);return this}})},f.extend(f.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),f.extend(f.Element,{remember:function(t,e){if("object"==typeof t)for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;0<=t;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),f.get=function(n){var t=r.getElementById(function(t){var e=(n||"").toString().match(f.regex.reference);if(e)return e[1]}()||n);return f.adopt(t)},f.select=function(t,e){return new f.Set(f.utils.map((e||r).querySelectorAll(t),function(t){return f.adopt(t)}))},f.extend(f.Parent,{select:function(t){return f.select(t,this.node)}});var g="abcdef".split("");if("function"!=typeof s.CustomEvent){var b=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=r.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};b.prototype=s.Event.prototype,f.CustomEvent=b}else f.CustomEvent=s.CustomEvent;return function(r){for(var a=0,t=["moz","webkit"],e=0;e<t.length&&!s.requestAnimationFrame;++e)r.requestAnimationFrame=r[t[e]+"RequestAnimationFrame"],r.cancelAnimationFrame=r[t[e]+"CancelAnimationFrame"]||r[t[e]+"CancelRequestAnimationFrame"];r.requestAnimationFrame=r.requestAnimationFrame||function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-a)),i=r.setTimeout(function(){t(e+n)},n);return a=e+n,i},r.cancelAnimationFrame=r.cancelAnimationFrame||r.clearTimeout}(s),f}(r,r.document)}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),a=n(3);function s(t){if("string"!=typeof t)return null;var e=new RegExp("^(([URFDLB])([0-9]+))(([URFDLB])([0-9]+))(([URFDLB])([0-9]+))?(-s([0-9+]))?(-i([0-9+]))?(-(black|dgrey|grey|silver|white|yellow|red|orange|blue|green|purple|pink|[0-9a-fA-F]{6}|[0-9a-fA-F]{3}))?").exec(t);return e?{s1:{face:i.Face[e[2]],n:parseInt(e[3])},s2:{face:i.Face[e[5]],n:parseInt(e[6])},s3:e[7]?{face:i.Face[e[8]],n:parseInt(e[9])}:void 0,color:e[15]?a.parseColor(e[15]):r.ColorCode.Gray,scale:e[11]?parseInt(e[11]):10,influence:e[13]?parseInt(e[13]):10}:null}e.parseArrows=function(t){return"string"!=typeof t?[]:t.split(",").map(function(t){return s(t)}).filter(function(t){return!!t})},e.parseArrow=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),a=n(5),s=n(13),h=n(0),f=n(1);e.makeStickerColors=function(o){var c=o.stickerColors,u=o.mask?r.makeMasking(o.mask,o.cubeSize):null;if(u&&o.maskAlg){var e=new a.CubeData(o.cubeSize,u);s.parseAlgorithm(o.maskAlg).forEach(function(t){e.turn(t)}),u=e.faces}c||(c=[].concat.apply([],h.AllFaces.map(function(t){return Array.apply(null,Array(o.cubeSize*o.cubeSize)).map(function(){return o.colorScheme[t]})})));var t=h.AllFaces.reduce(function(t,e){t[e]||(t[e]=[]);for(var n=0;n<o.cubeSize;n++)for(var i=0;i<o.cubeSize;i++){var r=h.AllFaces.indexOf(e),a=n*o.cubeSize+i,s=r*(o.cubeSize*o.cubeSize)+a;c.length<=s?t[e][o.cubeSize*n+i]=f.ColorName.Black:t[e][o.cubeSize*n+i]=c[s],u&&!u[e][o.cubeSize*n+i]&&(t[e][o.cubeSize*n+i]=f.ColorCode.DarkGray)}return t},{}),n=new a.CubeData(o.cubeSize,t),i=[];return o.case?i=s.parseCase(o.case):o.algorithm&&(i=s.parseAlgorithm(o.algorithm)),i.forEach(function(t){n.turn(t)}),[].concat.apply([],h.AllFaces.map(function(t){return n.faces[t].slice()}))}},function(t,e,n){"use strict";var i,r,a,s,o,c,u,h,f,l,d,p,F,m,v,y,g,b,x,w,k,C,S,M,L,A,R,D,U,T,P,B,N,E,_,z,O,j,X,G,I,Y,V;Object.defineProperty(e,"__esModule",{value:!0});var q=n(0),W=((i={})[q.Masking.FL]=((r={})[q.Face.U]=function(t,e,n){return!1},r[q.Face.D]=function(t,e,n){return!0},r[q.Face.R]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1},r[q.Face.L]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1},r[q.Face.F]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1},r[q.Face.B]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1},r),i[q.Masking.F2L]=((a={})[q.Face.U]=function(t,e,n){return!1},a[q.Face.D]=function(t,e,n){return!0},a[q.Face.R]=function(t,e,n){return 0<t},a[q.Face.L]=function(t,e,n){return 0<t},a[q.Face.F]=function(t,e,n){return 0<t},a[q.Face.B]=function(t,e,n){return 0<t},a),i[q.Masking.LL]=((s={})[q.Face.U]=function(t,e,n){return!0},s[q.Face.D]=function(t,e,n){return!1},s[q.Face.R]=function(t,e,n){return 0==t},s[q.Face.L]=function(t,e,n){return 0==t},s[q.Face.F]=function(t,e,n){return 0==t},s[q.Face.B]=function(t,e,n){return 0==t},s),i[q.Masking.CLL]=((o={})[q.Face.U]=function(t,e,n){return 0<t&&0<e&&t<n-1&&e<n-1||(0==t||t==n-1)&&(0==e||e==n-1)},o[q.Face.D]=function(t,e,n){return!1},o[q.Face.R]=function(t,e,n){return 0==t&&(0==e||e==n-1)},o[q.Face.L]=function(t,e,n){return 0==t&&(0==e||e==n-1)},o[q.Face.F]=function(t,e,n){return 0==t&&(0==e||e==n-1)},o[q.Face.B]=function(t,e,n){return 0==t&&(0==e||e==n-1)},o),i[q.Masking.ELL]=((c={})[q.Face.U]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},c[q.Face.D]=function(t,e,n){return!0},c[q.Face.R]=function(t,e,n){return 0==t&&0<e&&e<n-1||0!=t},c[q.Face.L]=function(t,e,n){return 0==t&&0<e&&e<n-1||0!=t},c[q.Face.F]=function(t,e,n){return 0==t&&0<e&&e<n-1||0!=t},c[q.Face.B]=function(t,e,n){return 0==t&&0<e&&e<n-1||0!=t},c),i[q.Masking.blank]=((u={})[q.Face.U]=function(t,e,n){return!1},u[q.Face.D]=function(t,e,n){return!1},u[q.Face.R]=function(t,e,n){return!1},u[q.Face.L]=function(t,e,n){return!1},u[q.Face.F]=function(t,e,n){return!1},u[q.Face.B]=function(t,e,n){return!1},u),i[q.Masking.PLL]=((h={})[q.Face.U]=function(t,e,n){return!0},h[q.Face.D]=function(t,e,n){return!0},h[q.Face.R]=function(t,e,n){return!0},h[q.Face.L]=function(t,e,n){return!0},h[q.Face.F]=function(t,e,n){return!0},h[q.Face.B]=function(t,e,n){return!0},h),i[q.Masking.OLL]=((f={})[q.Face.U]=function(t,e,n){return!0},f[q.Face.D]=function(t,e,n){return!0},f[q.Face.R]=function(t,e,n){return 0!==t},f[q.Face.L]=function(t,e,n){return 0!==t},f[q.Face.F]=function(t,e,n){return 0!==t},f[q.Face.B]=function(t,e,n){return 0!==t},f),i[q.Masking.OCLL]=((l={})[q.Face.U]=function(t,e,n){return 0<t&&0<e&&t<n-1&&e<n-1||(0==t||t==n-1)&&(0==e||e==n-1)},l[q.Face.D]=function(t,e,n){return!1},l[q.Face.R]=function(t,e,n){return!1},l[q.Face.L]=function(t,e,n){return!1},l[q.Face.F]=function(t,e,n){return!1},l[q.Face.B]=function(t,e,n){return!1},l),i[q.Masking.OELL]=((d={})[q.Face.U]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},d[q.Face.D]=function(t,e,n){return!0},d[q.Face.R]=function(t,e,n){return 0!==t},d[q.Face.L]=function(t,e,n){return 0!==t},d[q.Face.F]=function(t,e,n){return 0!==t},d[q.Face.B]=function(t,e,n){return 0!==t},d),i[q.Masking.COLL]=((p={})[q.Face.U]=function(t,e,n){return!0},p[q.Face.D]=function(t,e,n){return!1},p[q.Face.R]=function(t,e,n){return 0==t&&(0==e||e==n-1)},p[q.Face.L]=function(t,e,n){return 0==t&&(0==e||e==n-1)},p[q.Face.F]=function(t,e,n){return 0==t&&(0==e||e==n-1)},p[q.Face.B]=function(t,e,n){return 0==t&&(0==e||e==n-1)},p),i[q.Masking.OCELL]=((F={})[q.Face.U]=function(t,e,n){return!0},F[q.Face.D]=function(t,e,n){return!1},F[q.Face.R]=function(t,e,n){return 0==t&&0<e&&e<n-1},F[q.Face.L]=function(t,e,n){return 0==t&&0<e&&e<n-1},F[q.Face.F]=function(t,e,n){return 0==t&&0<e&&e<n-1},F[q.Face.B]=function(t,e,n){return 0==t&&0<e&&e<n-1},F),i[q.Masking.WV]=((m={})[q.Face.U]=function(t,e,n){return!0},m[q.Face.D]=function(t,e,n){return!0},m[q.Face.R]=function(t,e,n){return 0<t},m[q.Face.L]=function(t,e,n){return 0<t},m[q.Face.F]=function(t,e,n){return 0<t},m[q.Face.B]=function(t,e,n){return 0<t},m),i[q.Masking.VH]=((v={})[q.Face.U]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},v[q.Face.D]=function(t,e,n){return!0},v[q.Face.R]=function(t,e,n){return 0<t},v[q.Face.L]=function(t,e,n){return 0<t},v[q.Face.F]=function(t,e,n){return 0<t},v[q.Face.B]=function(t,e,n){return 0<t},v),i[q.Masking.ELS]=((y={})[q.Face.U]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},y[q.Face.D]=function(t,e,n){return 0!=t||e<n-1},y[q.Face.R]=function(t,e,n){return 0<t&&(t!=n-1||0<e)},y[q.Face.L]=function(t,e,n){return 0<t},y[q.Face.F]=function(t,e,n){return 0<t&&(t!=n-1||e<n-1)},y[q.Face.B]=function(t,e,n){return 0<t},y),i[q.Masking.CLS]=((g={})[q.Face.U]=function(t,e,n){return!0},g[q.Face.D]=function(t,e,n){return!0},g[q.Face.R]=function(t,e,n){return 0<t},g[q.Face.L]=function(t,e,n){return 0<t},g[q.Face.F]=function(t,e,n){return 0<t},g[q.Face.B]=function(t,e,n){return 0<t},g),i[q.Masking.CMLL]=((b={})[q.Face.U]=function(t,e,n){return!(0!=t&&t!=n-1||0!=e&&e!=n-1)},b[q.Face.D]=function(t,e,n){return!0},b[q.Face.R]=function(t,e,n){return 0<t||0==e||e==n-1},b[q.Face.L]=function(t,e,n){return 0<t||0==e||e==n-1},b[q.Face.F]=function(t,e,n){return 0==e||e==n-1},b[q.Face.B]=function(t,e,n){return 0==e||e==n-1},b),i[q.Masking.CROSS]=((x={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},x[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},x[q.Face.R]=function(t,e,n){return 0<t&&0<e&&e<n-1},x[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1},x[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1},x[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},x),i[q.Masking.centers]=((w={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},w[q.Face.D]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},w[q.Face.R]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},w[q.Face.L]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},w[q.Face.F]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},w[q.Face.B]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},w),i[q.Masking.F2L3]=((k={})[q.Face.U]=function(t,e,n){return!1},k[q.Face.D]=function(t,e,n){return 0==t&&e==n-1||!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},k[q.Face.R]=function(t,e,n){return 0<t&&e<n-1},k[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1},k[q.Face.F]=function(t,e,n){return 0<t&&0<e},k[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},k),i[q.Masking.F2L2]=((C={})[q.Face.U]=function(t,e,n){return!1},C[q.Face.D]=function(t,e,n){return 0<t||0<e&&e<n-1},C[q.Face.R]=function(t,e,n){return 0<t&&0<e},C[q.Face.L]=function(t,e,n){return 0<t&&e<n-1},C[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1},C[q.Face.B]=function(t,e,n){return 0<t},C),i[q.Masking.F2LSM]=((S={})[q.Face.U]=function(t,e,n){return!1},S[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)||0==e&&t==n-1||0==t&&e==n-1},S[q.Face.R]=function(t,e,n){return 0<t&&e<n-1},S[q.Face.L]=function(t,e,n){return 0<t&&e<n-1},S[q.Face.F]=function(t,e,n){return 0<t&&0<e},S[q.Face.B]=function(t,e,n){return 0<t&&0<e},S),i[q.Masking.F2L1]=((M={})[q.Face.U]=function(t,e,n){return!1},M[q.Face.D]=function(t,e,n){return 0!==t||e!==n-1},M[q.Face.R]=function(t,e,n){return 0<t&&0<e},M[q.Face.L]=function(t,e,n){return 0<t},M[q.Face.F]=function(t,e,n){return 0<t&&e<n-1},M[q.Face.B]=function(t,e,n){return 0<t},M),i[q.Masking.F2B]=((L={})[q.Face.U]=function(t,e,n){return!1},L[q.Face.D]=function(t,e,n){return 0==e||e==n-1},L[q.Face.R]=function(t,e,n){return 0<t},L[q.Face.L]=function(t,e,n){return 0<t},L[q.Face.F]=function(t,e,n){return 0<t&&(0==e||e==n-1)},L[q.Face.B]=function(t,e,n){return 0<t&&(0==e||e==n-1)},L),i[q.Masking.LINE]=((A={})[q.Face.U]=function(t,e,n){return!1},A[q.Face.D]=function(t,e,n){return 0<e&&e<n-1},A[q.Face.R]=function(t,e,n){return!1},A[q.Face.L]=function(t,e,n){return!1},A[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1},A[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},A),i[q.Masking.beginnerstep6]=((R={})[q.Face.U]=function(t,e,n){return!(0==t&&0==e||0==t&&e==n-1||t==n-1&&0==e)},R[q.Face.D]=function(t,e,n){return!0},R[q.Face.R]=function(t,e,n){return 0!=t||e!=n-1},R[q.Face.L]=function(t,e,n){return 0!=t||0!=e&&e!=n-1},R[q.Face.F]=function(t,e,n){return 0!=t||0!=e},R[q.Face.B]=function(t,e,n){return 0!=t||0!=e&&e!=n-1},R),i[q.Masking.beginnerstep3]=((D={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},D[q.Face.D]=function(t,e,n){return!0},D[q.Face.R]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1||0!==t&&t!==n-1&&0==e},D[q.Face.L]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1},D[q.Face.F]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1||0!==t&&t!==n-1&&e==n-1},D[q.Face.B]=function(t,e,n){return t==n-1||0<t&&t<n-1&&0<e&&e<n-1},D),i[q.Masking.beginnerstep2]=((U={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},U[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)||0==t&&e==n-1},U[q.Face.R]=function(t,e,n){return 0<t&&0<e&&e<n-1||t==n-1&&0==e},U[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1},U[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1||t==n-1&&e==n-1},U[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},U),i[q.Masking.beginnerstep1]=((T={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},T[q.Face.D]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1||0<t&&t<n-1&&e==n-1},T[q.Face.R]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1||t==n-1&&0<e&&e<n-1},T[q.Face.L]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},T[q.Face.F]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},T[q.Face.B]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},T),i[q.Masking.f1c]=((P={})[q.Face.U]=function(t,e,n){return!1},P[q.Face.D]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},P[q.Face.R]=function(t,e,n){return!1},P[q.Face.L]=function(t,e,n){return!1},P[q.Face.F]=function(t,e,n){return!1},P[q.Face.B]=function(t,e,n){return!1},P),i[q.Masking.f2c]=((B={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},B[q.Face.D]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},B[q.Face.R]=function(t,e,n){return!1},B[q.Face.L]=function(t,e,n){return!1},B[q.Face.F]=function(t,e,n){return!1},B[q.Face.B]=function(t,e,n){return!1},B),i[q.Masking.f3c]=((N={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},N[q.Face.D]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},N[q.Face.R]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},N[q.Face.L]=function(t,e,n){return!1},N[q.Face.F]=function(t,e,n){return!1},N[q.Face.B]=function(t,e,n){return!1},N),i[q.Masking.yau1e]=((E={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},E[q.Face.D]=function(t,e,n){return t!=n-1&&0!=e&&e!=n-1},E[q.Face.R]=function(t,e,n){return!1},E[q.Face.L]=function(t,e,n){return!1},E[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},E[q.Face.B]=function(t,e,n){return!1},E),i[q.Masking.yau3e]=((_={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},_[q.Face.D]=function(t,e,n){return!(!(0!=t&&t!=n-1||0!=e&&e!=n-1)||e==n-1)},_[q.Face.R]=function(t,e,n){return!1},_[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},_[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},_[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},_),i[q.Masking.yau5e]=((z={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},z[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},z[q.Face.R]=function(t,e,n){return 0<t&&0<e&&e<n-1||0<t&&t<n-1&&0==e},z[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1},z[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1||0<t&&t<n-1&&e==n-1},z[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},z),i[q.Masking.yau4e]=((O={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},O[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},O[q.Face.R]=function(t,e,n){return 0<t&&0<e&&e<n-1},O[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1},O[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1},O[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},O),i[q.Masking.yaul4c]=((j={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},j[q.Face.D]=function(t,e,n){return!(!(0!=t&&t!=n-1||0!=e&&e!=n-1)||e==n-1)},j[q.Face.R]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},j[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1},j[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1},j[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1},j),i[q.Masking.yau3e1c]=((X={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},X[q.Face.D]=function(t,e,n){return!(!(0!=t&&t!=n-1||0!=e&&e!=n-1)||e==n-1)},X[q.Face.R]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},X[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},X[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},X[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},X),i[q.Masking.yau3e2c]=((G={})[q.Face.U]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},G[q.Face.D]=function(t,e,n){return!(!(0!=t&&t!=n-1||0!=e&&e!=n-1)||e==n-1)},G[q.Face.R]=function(t,e,n){return 0<t&&t<n-1&&0<e&&e<n-1},G[q.Face.L]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},G[q.Face.F]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)||0<t&&t<n-1&&0<e&&e<n-1},G[q.Face.B]=function(t,e,n){return 0<t&&0<e&&e<n-1&&!(0<t&&t<n-1&&0<e&&e<n-1)},G),i[q.Masking.EDGES]=((I={})[q.Face.U]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},I[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},I[q.Face.R]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},I[q.Face.L]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},I[q.Face.F]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},I[q.Face.B]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},I),i[q.Masking.bld1edge]=((Y={})[q.Face.U]=function(t,e,n){return(0==t||t==n-1)&&(0==e||e==n-1)||1==e&&1==t||0==e},Y[q.Face.D]=function(t,e,n){return(0==t||t==n-1)&&(0==e||e==n-1)||1==e&&1==t},Y[q.Face.R]=function(t,e,n){return(0==t||t==n-1)&&(0==e||e==n-1)||1==e&&1==t},Y[q.Face.L]=function(t,e,n){return(0==t||t==n-1)&&(0==e||e==n-1)||1==e&&1==t||0==t},Y[q.Face.F]=function(t,e,n){return(0==t||t==n-1)&&(0==e||e==n-1)||1==e&&1==t},Y[q.Face.B]=function(t,e,n){return(0==t||t==n-1)&&(0==e||e==n-1)||1==e&&1==t},Y),i[q.Masking.bld1corner]=((V={})[q.Face.U]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},V[q.Face.D]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)||0==t&&e==n-1},V[q.Face.R]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)||t==n-1&&0==e},V[q.Face.L]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},V[q.Face.F]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)||t==n-1&&e==n-1},V[q.Face.B]=function(t,e,n){return!!(0!=t&&t!=n-1||0!=e&&e!=n-1)},V),i);e.makeMasking=function(i,r){var t;if(!W[i])throw new Error("invalid masking "+i);for(var e=r*r,a=((t={})[q.Face.U]=[],t[q.Face.F]=[],t[q.Face.R]=[],t[q.Face.D]=[],t[q.Face.L]=[],t[q.Face.B]=[],t),n=function(t){var e=Math.floor(t/r),n=t%r;q.AllFaces.forEach(function(t){a[t].push(W[i][t](e,n,r))})},s=0;s<e;s++)n(s);return a}},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),u=n(0),h=/([2-9]+)?([UuFfRrDdLlBbMESxyz])(w)?([2\'])?/g,a=((i={})[r.TurnType.Clockwise]=r.TurnType.CounterClockwise,i[r.TurnType.CounterClockwise]=r.TurnType.Clockwise,i[r.TurnType.Double]=r.TurnType.Double,i);function s(t){if(!t)return[];var e,n=[];do{if(e=h.exec(t)){var i=e[1],r=e[2],a=e[3],s=e[4]||u.TurnAbbreviation.Clockwise,o=r===r.toLowerCase(),c={move:l(r),turnType:d(s),slices:o?2:f(i,a)};n.push(c)}}while(e);return n}function f(t,e){if(e&&!t)return 2;if(!e&&t)throw new Error("Invalid move: Cannot specify num slices if outer block move indicator 'w' is not present");return e||t?parseInt(t):1}function l(t){if(u.possibleMoves.indexOf(t)<0)throw new Error("Invalid move ("+t+"): Possible turn faces are [U R F L D B M E S]");return t}function d(t){switch(t){case u.TurnAbbreviation.Clockwise:return r.TurnType.Clockwise;case u.TurnAbbreviation.CounterClockwise:return r.TurnType.CounterClockwise;case u.TurnAbbreviation.Double:return r.TurnType.Double;default:throw new Error("Invalid move modifier ("+t+")")}}e.parseAlgorithm=s,e.parseCase=function(t){return s(t).map(function(t){return{turnType:a[t.turnType],move:t.move,slices:t.slices}}).reverse()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),s=n(16),o=n(17),c=n(6);e.parseOptions=function(t){var i={},r=function(t){for(var e={},n=(-1<t.indexOf("?")?t.substr(t.indexOf("?")+1):t).split("&"),i=0;i<n.length;i++){var r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return e}(t);return Object.keys(r).forEach(function(t){var e=r[t];switch(t){case"pzl":i.cubeSize=parseInt(e)||3;break;case"size":var n=parseInt(e)||250;i.width=n,i.height=n;break;case"view":i.view=e;break;case"stage":i.mask=e;break;case"r":i.viewportRotations=a.parseRotationSequence(e);break;case"alg":i.algorithm=e;break;case"case":i.case=e;break;case"fc":i.stickerColors=s.parseFaceletColors(e);break;case"sch":i.colorScheme=o.parseColorScheme(e);break;case"bg":i.backgroundColor=e;break;case"cc":i.cubeColor=e;break;case"co":i.cubeOpacity=parseInt(e)||100;break;case"fo":i.stickerOpacity=parseInt(e)||100;break;case"dist":i.dist=parseInt(e)||5;break;case"arw":i.arrows=e;break;case"fd":i.facelets=c.parseFaceletDefinitions(e);break;case"ac":console.warn("Currently param 'ac' is unsupported")}}),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n(0);e.parseRotationSequence=function(t){var e,n=/([xyz]-?[0-9][0-9]?[0-9]?)/g,i=[];do{if(e=n.exec(t)){var r=e[0],a=r.charAt(0),s=r.substr(1),o=c.AxisSymbolToAxis[a];i.push([o,parseInt(s)])}}while(e);return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(1);e.parseFaceletColors=function(t){var n=[];if(-1<t.indexOf(","))t.split(",").forEach(function(t){var e=i.parseColor(t);e&&n.push(e)});else for(var e=0;e<t.length;e++)n.push(r.ColorAbbreviationToCode[t.charAt(e)]);return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),o=n(1),c=n(0);e.parseColorScheme=function(t){return-1<t.indexOf(",")?(r={},(a=t.split(",")).length<c.AllFaces.length?c.DefaultColorScheme:(c.AllFaces.forEach(function(t,e){if(a.length>e){var n=s.parseColor(a[e]),i=o.ColorNameToCode[n]||n;n&&(r[t]=i)}}),r)):(i={},(n=t).length<c.AllFaces.length?c.DefaultColorScheme:(c.AllFaces.forEach(function(t,e){n.length>e&&(i[t]=o.ColorAbbreviationToCode[n.charAt(e)])}),i));var n,i,r,a}}])});